/**
 * Cupertino Pane 1.4.22
 * Cupertino Panes is multi-functional modals, cards & panes with touch technologies.
 * https://panejs.com
 *
 * Copyright 2019-2025 Roman Antonov (roman-rr)
 *
 * Released under the MIT License
 *
 * Released on: July 1, 2025
 */

class HorizontalModule{static CollectSettings(t){return t.horizontal?Object.assign(Object.assign({},t),HorizontalModule.forceSettings):t}constructor(t){if(this.instance=t,this.initialBreakX="left",this.initialBreakY="middle",this.settings=this.instance.settings,this.transitions=this.instance.transitions,this.events=this.instance.events,!this.settings.horizontal)return null;this.parseInitialBreak(),this.transitions.setPaneElTransform=t=>this.setPaneElTransform(t),this.instance.on("beforePresentTransition",(()=>{this.calcHorizontalBreaks(),this.overrideInitialPositioning()})),this.instance.on("onTransitionEnd",(t=>{"breakpoint"!==t.type&&"present"!==t.type||this.instance.getPanelTransformX()||this.calcHorizontalBreaks()})),this.instance.on("onDidPresent",(t=>{t.animate||this.calcHorizontalBreaks()})),this.instance.on("onDragEnd",(t=>{this.fastSwipeNext=this.events.fastSwipeNext("X")}))}parseInitialBreak(){const t=this.settings.initialBreak.split(" ");1===t.length?(this.initialBreakY=t[0],this.initialBreakX="left"):2===t.length&&(this.initialBreakY=t[0],this.initialBreakX=t[1]),["top","middle","bottom"].includes(this.initialBreakY)||(console.warn(`Cupertino Pane: Invalid Y breakpoint "${this.initialBreakY}", using "middle"`),this.initialBreakY="middle"),["left","right"].includes(this.initialBreakX)||(console.warn(`Cupertino Pane: Invalid X breakpoint "${this.initialBreakX}", using "left"`),this.initialBreakX="left")}calcHorizontalBreaks(){this.defaultRect={width:this.instance.paneEl.getBoundingClientRect().width,left:this.instance.paneEl.getBoundingClientRect().left,right:this.instance.paneEl.getBoundingClientRect().right},this.horizontalBreaks={left:-this.defaultRect.left+this.settings.horizontalOffset,right:window.innerWidth-this.defaultRect.left-this.defaultRect.width-this.settings.horizontalOffset}}overrideInitialPositioning(){const t=this.instance.breakpoints.breaks[this.initialBreakY],i=this.horizontalBreaks[this.initialBreakX],e=this.instance.paneEl.style.transform.includes(`${this.instance.screenHeightOffset}px`);this.instance.paneEl.style.transform=e?`translateX(${i}px) translateY(${this.instance.screenHeightOffset}px) translateZ(0px)`:`translateX(${i}px) translateY(${t}px) translateZ(0px)`,this.currentBreakpoint=this.initialBreakX,this.instance.breakpoints.currentBreakpoint=t}setPaneElTransform(t){let i=t.translateY,e=t.translateX||this.instance.getPanelTransformX();"end"===t.type&&(i=this.instance.breakpoints.getClosestBreakY(),e=this.getClosestBreakX(),this.fastSwipeNext&&("left"===this.currentBreakpoint&&this.instance.getPanelTransformX()>this.horizontalBreaks.left&&(e=this.horizontalBreaks.right),"right"===this.currentBreakpoint&&this.instance.getPanelTransformX()<this.horizontalBreaks.right&&(e=this.horizontalBreaks.left)),this.currentBreakpoint=e===this.horizontalBreaks.left?"left":"right",this.instance.breakpoints.currentBreakpoint=i),this.instance.paneEl.style.transform=`translateX(${e||0}px) translateY(${i||0}px) translateZ(0px)`}getClosestBreakX(){const t=this.instance.getPanelTransformX();return Math.abs(this.horizontalBreaks.left-t)<Math.abs(this.horizontalBreaks.right-t)?this.horizontalBreaks.left:this.horizontalBreaks.right}moveToHorizontalBreak(t){this.horizontalBreaks||this.calcHorizontalBreaks();const i=this.instance.getPanelTransformY(),e=this.horizontalBreaks[t];this.instance.paneEl.style.transform=`translateX(${e}px) translateY(${i}px) translateZ(0px)`,this.currentBreakpoint=t}getCurrentHorizontalBreak(){return this.currentBreakpoint}}HorizontalModule.forceSettings={touchAngle:null};export{HorizontalModule};